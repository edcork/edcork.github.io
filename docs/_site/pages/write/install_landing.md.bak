<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"><link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"><style id="jtd-nav-activation"> .site-nav ul li a { background-image: none; }</style><script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Prepare an environment to install OMT | Ed Cork’s tech writing portfolio</title><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="Prepare an environment to install OMT" /><meta property="og:locale" content="en_US" /><meta name="description" content="Examples of the type of projects I have worked on." /><meta property="og:description" content="Examples of the type of projects I have worked on." /><link rel="canonical" href="http://localhost:4000/pages/write/install_landing.md.bak" /><meta property="og:url" content="http://localhost:4000/pages/write/install_landing.md.bak" /><meta property="og:site_name" content="Ed Cork’s tech writing portfolio" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Prepare an environment to install OMT" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Examples of the type of projects I have worked on.","headline":"Prepare an environment to install OMT","url":"http://localhost:4000/pages/write/install_landing.md.bak"}</script><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewBox="0 0 16 16"><title>Copy</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"><title>Copied</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg><div class="side-bar"><div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Ed Cork's tech writing portfolio </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button></div><nav aria-label="Main" id="site-nav" class="site-nav"></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search" role="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Ed Cork's tech writing portfolio" aria-label="Search Ed Cork's tech writing portfolio" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="" class="site-button" > </a></ul></nav></div><div class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><span>Prepare an environment to install OMT</span></ol></nav><div id="main-content" class="main-content"><main> <h# Prepare an environment to install OMT {: .no_toc } **On this page** > - TOC > {:toc} Before you install OPTIC Management Toolkit (OMT), you must perform some prerequisite tasks to configure the environment. ## Prepare to install the embedded Kubernetes ## You must ensure that the cluster is correctly configured for the install script to deploy the Kubernetes that is embedded in OMT. This comprises the following tasks. | Task | Required | Description | Detailed steps| | --- | --- | --- | --- | | Enable a regular user to install OMT | Optional | You need only do this if you will use a regular user to perform the installation. | [Enable a regular user to install OMT](/doc/OMT/24.1/AutoSudoInstall "Enable a regular user to install OMT")| | Update the system configuration | Mandatory | Update the system configuration to meet the deployment requirements. This includes ensuring the localhost resolves to 127.0.0.1, setting the required system parameters, disabling swap space, making sure all required Linux packages are installed, checking the SSH connection, checking default gateway, checking the host name on every node, and synchronizing time. A script is available to automate this process.  | [Make required system configurations](/doc/OMT/24.1/EmbeddedK8sSystemConfig "Make required system configurations") | | Check the firewall settings | Mandatory (if you've set a firewall) | If you have enabled a firewall in your network, you must check that the firewall settings meet the deployment requirements.  | [Check the firewall settings](/doc/OMT/24.1/CheckNetworkSetting "Check the firewall settings") | | Check that the required ports are open | Mandatory | Check that all the ports that OMT required for network communication are open. | [Check that the required ports are open (embedded K8s)](/doc/OMT/24.1/OpenPortsEmbedded "Check that the required ports are open (embedded K8s)") | | Configure High Availability (HA) | Optional | If you have more than one control plane node, you can configure HA. To do this, you can either use Keepalived (included in OMT) or set up your own load balancer(s). | [Configure Keepalived for High Availability](/doc/OMT/24.1/ConfigKeepalived "Configure Keepalived for High Availability") [Configure an internal load balancer](/doc/OMT/24.1/ConfigureLB "Configure an internal load balancer") | | Configure the `install.properties` file. | Optional | Configure the installation of the control plane and worker nodes in the `install.properties` file. You can also use command options to do this when you run the `install` command. | [Configure the install.properties file](/doc/OMT/24.1/ConfigureInstallProperties "Configure the install.properties file") | | Run a preliminary check of the nodes | Optional | You can run a script (`pre-check.sh`) that checks the readiness of the nodes for the deployment. This step is optional. However, it's highly advisable that you perform a preliminary check on all the control plane nodes and worker nodes before you perform the remaining preparatory tasks to check whether your prepared nodes meet the basic requirements to install OPTIC Management Toolkit (OMT). | [Run a preliminary check](/doc/OMT/24.1/PrelimCheckInstall "Run a preliminary check") | ## Request certificates ## Certificates protect the network traffics between OMT and external services. The network traffic flows include: * Browser -> OMT The OMT installer will create certificate authorities (CAs) to generate and sign server certificates for the ingress controller. However, the browsers in your organization won't be able to validate these certificates, as they're not in your organization's trust store. If you want the browsers in your organization to connect to OMT securely, you must contact your IT administrator and request a server certificate pair (including a server certificate, a server key, and the CA cert which signed the server certificate). The server certificate pair is generated for the external access host name of OMT. For more information, see [Request server certificates (embedded K8s)](/doc/OMT/24.1/RequestCertificatesEmbedded "Request server certificates (embedded K8s)"). * OMT -> external database If you are installing OMT with an external database, connect the database with TLS mode. In this case, contact the database administrator to request the CA certificate to validate the database server certificate. You'll use the CA certificate when you configure the `config.json` file later. * OMT -> external image registry If you are installing OMT with an external image registry, if the registry server certificate is already trusted on the operating system level, the CA cert of the registry isn't required. Otherwise, contact the external registry administrator to request the CA cert to validate the registry server certificate. The CA cert will be used while running the install command. These certificates are required for OMT installation. For the certificates required by applications, please check the applications' documentation. ## Set up persistent volumes ## If a container stops or restarts, all changes made inside the container are lost. To save information such as configuration files and databases, the information must be stored outside of the container in a persistent volume (PV). When you install OMT with the embedded Kubernetes, the NFS provisioner capability (which is enabled by default) creates the required PVs automatically. To use this capability, you must create a single volume on the NFS server. When you run the `install` command, you will specify the NFS server URL and the path to this volume in command options. For more information about how to set up persistent volumes, see [Set up persistent volumes (embedded K8s)](/doc/OMT/24.1/PreparePersistentVolumesEmbedded "Set up persistent volumes (embedded K8s)"). ## Create external databases ## OMT uses an IdM database. Unless you will use the PostgreSQL instance that's embedded in OMT, you must create it on the database server that you prepared earlier. For more information about how to do this, see [Configure external databases (embedded K8s)](/doc/OMT/24.1/PrepareExternalDatabasesEmbedded "Configure external databases (embedded K8s)"). If you want to use the embedded database instance, you don't need to create the databases. The install script will deploy the required databases automatically if you don't specify any database options when you run the `install` command. ## Decide what happens to log files ## OMT infrastructure and applications produce log files. By default, OMT collects these logs on an NFS volume (`itom-logging-vol`). However, you can also forward the logs to an external receiver, such as Elasticsearch Server or Splunk. For more information about how to do this, see [Forward application logs to an external receiver (embedded K8s)](/doc/OMT/24.1/MountLogsEmbedded "Forward application logs to an external receiver (embedded K8s)"). ## Configure on-access security scans ## OMT installation may fail if you have enabled on-access scanning by security products such as McAfee Endpoint Security, Microsoft Defender, or Trend Micro Deep Security Agent in your environment. To prevent this, you must exclude certain directories from the on-access scan. Further information is available in the [Security products can't scan files before they're deleted](/doc/OMT/24.1/McafeeCannotScanFilesDeleted "Security products can't scan files before they're deleted") troubleshooting topic. ## Create and configure a config.json file ## Before you run the `install` command, you must [Create and configure a config.json file (embedded K8s)](/doc/OMT/24.1/ConfigureConfigJsonEmbedded "Create and configure a config.json file (embedded K8s)") that contains all the necessary parameters for the installation script. This file will capture information about many of the decisions you have made while following the steps in this topic.</main><hr><footer><p><a href="#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-100 mb-0">Distributed by an <a href="https://github.com/just-the-docs/just-the-docs/tree/main/LICENSE.txt">MIT license.</a> <a href="https://www.netlify.com/">This site is powered by Netlify.</a></p><div class="d-flex mt-2"></div></footer></div></div><div class="search-overlay"></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script>
